<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width">
		<title>Stored Procedure</title>
		<link rel="stylesheet" href="/home/sharma/highlight/styles/atom-one-dark.min.css">
		<script src="/home/sharma/highlight/highlight.min.js"></script>
		<script>hljs.highlightAll();</script>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	</head>
	<style type="text/css" media="screen">
		main {
			margin: 16%;
			padding: 1px;
			background-color: None;
		}
		main > pre code {
		display: block;
		background: none;
		background-color: #eee;
		border: 1px solid #999;
		white-space: pre;
		-webkit-overflow-scrolling: touch;
		overflow-x: scroll;
		max-width: 69%;
		min-width: 36%;
		padding: 0;
	}

	</style>
	<body>
		<main>
		<h1>Stored Procedure</h1>
		<pre><code class="language-sql">
			DELIMITER $$
			CREATE PROCEDURE <i>proc_name</i>(
				[IN] <i style="color:gold">in_param</i> <i>dtype[(length)]</i>
				[OUT] <i style="color:skyblue">out_param</i> <i>dtype[(length)]</i>
				[INOUT] <i style="color:orangered">inout_param</i> <i>dtype[(length)]</i>
			)
			BEGIN
				DECLARE <i style="color:yellowgreen">inside_var dtype</i> [DEFAULT] <i>val</i>;
				SELECT COUNT(*)
				INTO <i style="color:yellowgreen">inside_var</i>/<i style="color:orangered">inout_param</i>/<i style="color:gold">in_param</i>
				FROM ...
				WHERE ... ;

				SET <i style="color:yellowgreen">inside_var</i> = ...;

				IF <i>condition</i> THEN
				<i>statements</i>;
				ELSEIF <i>elseif-condition</i> THEN
				<i>elseif-statements</i>;
				  ...
				ELSE
				<i>else-statements</i>;
				END IF;

				[<i>label</i>]: LOOP/REPEAT 
				   ...
					-- terminate the loop
					IF <i>condition</i> THEN
						LEAVE [<i>label</i>];
					END IF;
				   ...
					-- only used in REPEAT statement
					UNTIL <i>repeat_finish</i>
				END LOOP/REPEAT;


				SELECT <i color="yellowgreen">inside_var</i>
			END
			$$
			DELIMITER ;
		</code></pre>

		<br>
		<pre><code>
			DROP PROCEDURE [IF EXISTS] <i>stored_procedure_name</i>;
		</code></pre>
		</br>
		<br>
		<pre><code>
			SHOW PROCEDURE STATUS [LIKE <i>'pattern'</i> | WHERE <i>search_condition</i>]
		</code></pre></br>
		<h1>Stored Function</h1>
		<pre><code>
		DELIMITER $$

		CREATE FUNCTION <i>function_name</i>(
			<i>param1,
			param2</i>,
			...
		)
		RETURNS datatype
		[NOT] DETERMINISTIC
		BEGIN
			-- <i>statements</i>
		END $$

		DELIMITER ;
		</code>
		</pre>
		</main>
	</body>
</html>
